<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	xmlns:sefazgo="http://www.sefaz.go.gov.br"
	layout:decorate="~{layout/layout-master}">
<head>
	<title>List Countries</title>
	<!-- Datatables -->
    <link th:href="@{/resources/vendors/datatables.net-bs/css/dataTables.bootstrap.min.css}" rel="stylesheet">
</head>

<body>
	<section layout:fragment="content">
		<div class="row">
			<div class="col-md-12 col-xs-12">
				<div class="x_panel">
					<div class="x_title">
						<h2><i class="fa fa-flag pull-left"></i>List Countries</h2>
						<ul class="nav navbar-right panel_toolbox" sec:authorize="hasAnyRole('VINCULO_BASICO','PORTALSEFAZ_PERFIL_ADMIN','VISUALIZACAO_DE_FUNCIONALIDADES_DE_SISTEMAS')">
							<li>
								<a class="btn btn-default btn-xs pull-right" th:href="@{/countries/form}">
									<div class="fa fa-plus"> New</div>
								</a>
							</li>
						</ul>
						<div class="clearfix"></div>
					</div>
					<div class="x_content">
						
						<!-- Messages -->
						<sefazgo:messages/>
						
						<!-- Tab Panel -->
						<div role="tabpanel" data-example-id="togglable-tabs">

							<!-- Tabs -->
							<ul id="tab" class="nav nav-tabs bar_tabs" role="tablist">
								<li role="presentation" th:each="region, row:${regions}" th:classappend="${row.index eq 0} ? active : none">
									<a th:href="|#tab_content_${row.index}|" th:id="|tab_${region.id}|" role="tab" data-toggle="tab" aria-expanded="true" th:text="${region.name}"></a>
								</li>
							</ul>
							
							<!-- Content -->
							<div id="tabContent" class="tab-content">
								<div role="tabpanel" class="tab-pane fade" aria-labelledby="home-tab" 
										th:each="region, row:${regions}" th:classappend="${row.index eq 0} ? 'active in' : none"
										th:id="|tab_content_${row.index}|">
										
									<table th:id="|datatable-responsive_${row.index}|" class="table table-striped table-bordered dt-responsive nowrap js-sefazgo-datatable" cellspacing="0" width="100%">
										<thead>
											<tr>
												<th class="table-col-id">Id</th>
												<th>Name</th>
												<th class="all table-col-buttons" sec:authorize="hasAnyRole('VINCULO_BASICO','PORTALSEFAZ_PERFIL_ADMIN','VISUALIZACAO_DE_FUNCIONALIDADES_DE_SISTEMAS')"></th>
											</tr>
										</thead>
										<tbody>
											<th:block th:each="country : ${region.countries}">
												<tr th:if="${country != null}">
													<td class="table-col-id" th:text="${country.id}"></td>
													<td th:text="${country.name}"></td>
													<td class="table-col-buttons" sec:authorize="hasAnyRole('VINCULO_BASICO','PORTALSEFAZ_PERFIL_ADMIN','VISUALIZACAO_DE_FUNCIONALIDADES_DE_SISTEMAS')">
														<div class="pull-right">
															<button type="button" class="btn btn-default btn-xs" th:onclick="|location.href='@{/countries/form/}${country.id}'|" title="Edit"><div class="fa fa-pencil"></div></button>
															<button type="button" class="btn btn-default btn-xs" title="Delete" data-toggle="modal" data-target="#modalDeleteConfirmation" th:data-record-id="${country.id}" th:data-record-name="${country.name}" th:data-action-url="@{/countries/delete}"> <div class="glyphicon glyphicon-trash"></div></button>
														</div>
													</td>
												</tr>
											</th:block>
										</tbody>
									</table>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!-- Modal (Delete Confirmation)-->
			<div th:replace="@{layout/modal/modal-delete} :: modal"></div>
		</div>
	</section>

	<th:block layout:fragment="self-page-javascripts">
		<!-- Datatables -->
	    <script th:src="@{/resources/vendors/datatables.net/js/jquery.dataTables.min.js}"></script>
	    <!-- Sefazgo Datatables-->
		<script th:src="@{/resources/js/sefazgo/datatable/1.0.0/jquery.sefazgo.datatable.js}"></script>
	</th:block>

</body>
</html>