<?xml version="1.0" encoding="UTF-8"?>
<Configuration status="INFO">

	<Properties>
		<Property name="log-path">D:/Oracle/user/logs/${sys:weblogic.Name}</Property>
		<Property name="app-name">hrs</Property>
		<!-- Graylog -->
		<Property name="graylog-host">tcp:logs.intra.goias.gov.br</Property>
		<Property name="graylog-port">1515</Property>
	</Properties>
	
	<Appenders>
		<RollingFile name="log" fileName="${log-path}/${app-name}.log" filePattern="${log-path}/${app-name}.log.%d{yyyy-MM-dd}">
			<PatternLayout>
				<pattern>%d{dd-MM-yyyy HH:mm:ss} %-5p %T %c{1}.%M:%L %m%n</pattern>
			</PatternLayout>
			<Policies>
				<TimeBasedTriggeringPolicy interval="1" modulate="true" />
			</Policies>
		</RollingFile>

		<RollingFile name="error-log" fileName="${log-path}/${app-name}-error.log" filePattern="${log-path}/${app-name}-error.log.%d{yyyy-MM-dd}">
			<PatternLayout>
				<pattern>%d{dd-MM-yyyy HH:mm:ss} %-5p %T %c{1}.%M:%L %m%n</pattern>
			</PatternLayout>
			<Policies>
				<TimeBasedTriggeringPolicy interval="1" modulate="true" />
			</Policies>
		</RollingFile>
		
		<Gelf name="gelf"
              host="${graylog-host}"
              port="${graylog-port}"
              version="1.1"
              extractStackTrace="true"
              filterStackTrace="true"
              mdcProfiling="true"
              facility="${logs.graylog.facility}"
              includeFullMdc="true"
              additionalFieldTypes="version=String"
              maximumMessageSize="8192">
            <Field name="line" pattern="%L"/>
            <Field name="severity" pattern="%-5p"/>
            <Field name="simpleClassName" pattern="%c{1}"/>
            <Field name="method" pattern="%M"/>
            <Field name="version" literal="${project.version}"/>
            <Field name="server" pattern="%host"/>
            <Field name="app" literal="${app-name}"/>
            <Field name="thread" pattern="%T"/>
        </Gelf>

		<Console name="console" target="SYSTEM_OUT">
			<PatternLayout>
				<pattern>%d{dd-MM-yyyy HH:mm:ss} %-5p %T %c{1}.%M:%L %m%n</pattern>
			</PatternLayout>
		</Console>
	</Appenders>
	
	<Loggers>
        <Root level="INFO">
            <AppenderRef ref="console" />
        </Root>
 
        <Logger name="br.gov.go.sefaz.javaee" additivity="TRUE" level="INFO">
            <AppenderRef ref="log" level="INFO"/>
            <AppenderRef ref="error-log" level="ERROR"/>
            <AppenderRef ref="gelf" level="INFO" />
        </Logger>
 
 		<Logger name="org.hibernate" additivity="TRUE" level="INFO">
 			<AppenderRef ref="log" level="INFO"/>
            <AppenderRef ref="error-log" level="ERROR"/>
            <AppenderRef ref="gelf" level="WARN" />
        </Logger>
        
        <Logger name="org.hibernate.SQL" additivity="TRUE" level="INFO">
            <AppenderRef ref="log" level="INFO"/>
             <AppenderRef ref="error-log" level="ERROR"/>
            <AppenderRef ref="gelf" level="WARN" />
        </Logger>
        
        <Logger name="com.fasterxml.jackson" additivity="TRUE" level="WARN">
            <AppenderRef ref="log" level="WARN"/>
             <AppenderRef ref="error-log" level="ERROR"/>
            <AppenderRef ref="gelf" level="WARN" />
        </Logger>
        
        <Logger name="net.sf.ehcache" additivity="TRUE" level="WARN">
            <AppenderRef ref="log" level="WARN"/>
             <AppenderRef ref="error-log" level="ERROR"/>
            <AppenderRef ref="gelf" level="WARN" />
        </Logger>
 
        <Logger name="org.springframework" additivity="TRUE" level="INFO">
            <AppenderRef ref="log" level="INFO"/>
            <AppenderRef ref="error-log" level="ERROR"/>
            <AppenderRef ref="gelf" level="INFO" />
        </Logger>
        
        <Logger name="org.thymeleaf" additivity="TRUE" level="INFO">
            <AppenderRef ref="log" level="INFO"/>
            <AppenderRef ref="error-log" level="ERROR"/>
            <AppenderRef ref="gelf" level="INFO" />
        </Logger>
    </Loggers>
		
</Configuration>